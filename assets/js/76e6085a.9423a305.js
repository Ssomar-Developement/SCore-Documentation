"use strict";(globalThis.webpackChunkscore_documentation=globalThis.webpackChunkscore_documentation||[]).push([[8883],{6995:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"score/code_inspection/player_commands/ABSORPTION","title":"ABSORPTION","description":"Package: com.ssomar.score.commands.runnable.player.commands.absorption","source":"@site/docs/score/code_inspection/player_commands/ABSORPTION.md","sourceDirName":"score/code_inspection/player_commands","slug":"/score/code_inspection/player_commands/ABSORPTION","permalink":"/SCore-Documentation/docs/score/code_inspection/player_commands/ABSORPTION","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/score/code_inspection/player_commands/ABSORPTION.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"SCore","previous":{"title":"Player Commands","permalink":"/SCore-Documentation/docs/category/player-commands"},"next":{"title":"Projectile Settings","permalink":"/SCore-Documentation/docs/category/projectile-settings"}}');var r=o(4848),i=o(8453);const s={sidebar_position:1},a="ABSORPTION",l={},c=[{value:"Get the values for amount, time and current absorption of the target",id:"get-the-values-for-amount-time-and-current-absorption-of-the-target",level:2},{value:"Check argument value for <code>time</code>",id:"check-argument-value-for-time",level:2},{value:"If time is less than or equals to zero, make the absorption effect indefinite",id:"if-time-is-less-than-or-equals-to-zero-make-the-absorption-effect-indefinite",level:3},{value:"If time is greater than zero, create a temporary absorption effect",id:"if-time-is-greater-than-zero-create-a-temporary-absorption-effect",level:3},{value:"applyAbsorption()",id:"applyabsorption",level:2},{value:"If the absorption object&#39;s ScheduledTask is not null, cancel it",id:"if-the-absorption-objects-scheduledtask-is-not-null-cancel-it",level:3},{value:"Get the Player&#39;s instance based on the stored uuid of the AbsorptionObject argument",id:"get-the-players-instance-based-on-the-stored-uuid-of-the-absorptionobject-argument",level:3},{value:"If the instance value is null, return",id:"if-the-instance-value-is-null-return",level:4},{value:"Get current player absorption",id:"get-current-player-absorption",level:3},{value:"Get absorption expiry time and subtract it to the current time now and then divide itself by 50",id:"get-absorption-expiry-time-and-subtract-it-to-the-current-time-now-and-then-divide-itself-by-50",level:3},{value:"Modify the receiver&#39;s current absorption amount by increasing the amount",id:"modify-the-receivers-current-absorption-amount-by-increasing-the-amount",level:3},{value:"Generate a random uuid for the absorption buff for sql purposes",id:"generate-a-random-uuid-for-the-absorption-buff-for-sql-purposes",level:3},{value:"Insert the absorption object to the mysql records",id:"insert-the-absorption-object-to-the-mysql-records",level:3},{value:"Start a runnable task in case the player is still online",id:"start-a-runnable-task-in-case-the-player-is-still-online",level:3},{value:"If the absorption expires while the player is online, deduct the absorption from the player and remove the absorption from the mysql records",id:"if-the-absorption-expires-while-the-player-is-online-deduct-the-absorption-from-the-player-and-remove-the-absorption-from-the-mysql-records",level:4},{value:"Else, wait for the player to connect once more then create a query in mysql to get the records while deleting said records",id:"else-wait-for-the-player-to-connect-once-more-then-create-a-query-in-mysql-to-get-the-records-while-deleting-said-records",level:4}];function d(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"absorption",children:"ABSORPTION"})}),"\n",(0,r.jsxs)(t.p,{children:["Package: ",(0,r.jsx)(t.code,{children:"com.ssomar.score.commands.runnable.player.commands.absorption"})]}),"\n",(0,r.jsxs)(t.p,{children:["Go to: ",(0,r.jsx)(t.code,{children:"com.ssomar.score.commands.runnable.player.commands.absorption.Absorption"})]}),"\n",(0,r.jsx)(t.h2,{id:"get-the-values-for-amount-time-and-current-absorption-of-the-target",children:"Get the values for amount, time and current absorption of the target"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'double absorption = (double) sCommandToExec.getSettingValue("amount");\nint time = (int) sCommandToExec.getSettingValue("time");\ndouble currentAbsorption = receiver.getAbsorptionAmount();\n'})}),"\n",(0,r.jsxs)(t.h2,{id:"check-argument-value-for-time",children:["Check argument value for ",(0,r.jsx)(t.code,{children:"time"})]}),"\n",(0,r.jsx)(t.h3,{id:"if-time-is-less-than-or-equals-to-zero-make-the-absorption-effect-indefinite",children:"If time is less than or equals to zero, make the absorption effect indefinite"}),"\n",(0,r.jsx)(t.h3,{id:"if-time-is-greater-than-zero-create-a-temporary-absorption-effect",children:"If time is greater than zero, create a temporary absorption effect"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Get current unix time now in milliseconds"}),"\n",(0,r.jsx)(t.li,{children:"Multiply time by 50 to convert time ticks into seconds"}),"\n",(0,r.jsx)(t.li,{children:"Create a new absorption object by passing the receiver's uuid, absorption amount and expiration time in unix time milliseconds"}),"\n",(0,r.jsxs)(t.li,{children:["Pass the absorption object to ",(0,r.jsx)(t.code,{children:"AbsorptionManager.getInstance().applyAbsorption()"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Go to: ",(0,r.jsx)(t.code,{children:"com.ssomar.score.commands.runnable.player.commands.absorption.AbsorptionManager"})]}),"\n",(0,r.jsx)("hr",{}),"\n",(0,r.jsx)(t.h2,{id:"applyabsorption",children:"applyAbsorption()"}),"\n",(0,r.jsx)(t.h3,{id:"if-the-absorption-objects-scheduledtask-is-not-null-cancel-it",children:"If the absorption object's ScheduledTask is not null, cancel it"}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"ScheduledTask is an interface from SCore. For this class, its empty and as of this writing, it lacks\ndetailed information. Probably a knowledge issue from me -Special70"})}),"\n",(0,r.jsx)(t.h3,{id:"get-the-players-instance-based-on-the-stored-uuid-of-the-absorptionobject-argument",children:"Get the Player's instance based on the stored uuid of the AbsorptionObject argument"}),"\n",(0,r.jsx)(t.h4,{id:"if-the-instance-value-is-null-return",children:"If the instance value is null, return"}),"\n",(0,r.jsx)(t.h3,{id:"get-current-player-absorption",children:"Get current player absorption"}),"\n",(0,r.jsx)(t.h3,{id:"get-absorption-expiry-time-and-subtract-it-to-the-current-time-now-and-then-divide-itself-by-50",children:"Get absorption expiry time and subtract it to the current time now and then divide itself by 50"}),"\n",(0,r.jsx)(t.h3,{id:"modify-the-receivers-current-absorption-amount-by-increasing-the-amount",children:"Modify the receiver's current absorption amount by increasing the amount"}),"\n",(0,r.jsx)(t.h3,{id:"generate-a-random-uuid-for-the-absorption-buff-for-sql-purposes",children:"Generate a random uuid for the absorption buff for sql purposes"}),"\n",(0,r.jsx)(t.h3,{id:"insert-the-absorption-object-to-the-mysql-records",children:"Insert the absorption object to the mysql records"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"To ensure proper removal of the absorption in case of server restart or crash because\nthe old method involved saving the absorptions in memory."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"start-a-runnable-task-in-case-the-player-is-still-online",children:"Start a runnable task in case the player is still online"}),"\n",(0,r.jsx)(t.h4,{id:"if-the-absorption-expires-while-the-player-is-online-deduct-the-absorption-from-the-player-and-remove-the-absorption-from-the-mysql-records",children:"If the absorption expires while the player is online, deduct the absorption from the player and remove the absorption from the mysql records"}),"\n",(0,r.jsx)(t.h4,{id:"else-wait-for-the-player-to-connect-once-more-then-create-a-query-in-mysql-to-get-the-records-while-deleting-said-records",children:"Else, wait for the player to connect once more then create a query in mysql to get the records while deleting said records"}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["That's it. Go to ",(0,r.jsx)(t.code,{children:"AbsorptionQuery.java"})," for more information of how the queries are done"]})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>a});var n=o(6540);const r={},i=n.createContext(r);function s(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);