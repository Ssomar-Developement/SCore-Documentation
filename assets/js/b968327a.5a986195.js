"use strict";(globalThis.webpackChunkscore_documentation=globalThis.webpackChunkscore_documentation||[]).push([[2285],{8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},9564:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"score/code_inspection/adding_entity_conditions","title":"\u270d Adding Entity Conditions","description":"This page will help you in how to create entity conditions for SCore","source":"@site/docs/score/code_inspection/adding_entity_conditions.md","sourceDirName":"score/code_inspection","slug":"/score/code_inspection/adding_entity_conditions","permalink":"/SCore-Documentation/docs/score/code_inspection/adding_entity_conditions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/score/code_inspection/adding_entity_conditions.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"SCore","previous":{"title":"Hit Sound","permalink":"/SCore-Documentation/docs/score/code_inspection/projectile_settings/HitSound"},"next":{"title":"\u270d Adding Player Commands","permalink":"/SCore-Documentation/docs/score/code_inspection/adding_player_commands"}}');var r=t(4848),o=t(8453);const s={sidebar_position:10},a="\u270d Adding Entity Conditions",c={},d=[{value:"Go to <code>com.ssomar.score.features.FeatureSettingsSCore.java</code> to add an enum for your condition",id:"go-to-comssomarscorefeaturesfeaturesettingsscorejava-to-add-an-enum-for-your-condition",level:3},{value:"Go to the <code>entity</code> package",id:"go-to-the-entity-package",level:2},{value:"Go to the <code>entity.condition</code> package",id:"go-to-the-entitycondition-package",level:2},{value:"Create the custom class",id:"create-the-custom-class",level:2},{value:"Make the class extend EntityConditionFeature",id:"make-the-class-extend-entityconditionfeature",level:3},{value:"Select what Feature Parent Interface to use",id:"select-what-feature-parent-interface-to-use",level:3},{value:"Then finalize the extend class&#39;s properties",id:"then-finalize-the-extend-classs-properties",level:3},{value:"Create the constructor",id:"create-the-constructor",level:3},{value:"Setup the condition&#39;s logic",id:"setup-the-conditions-logic",level:3},{value:"Add this line in subReset()",id:"add-this-line-in-subreset",level:3},{value:"Set hasCondition() return value",id:"set-hascondition-return-value",level:3},{value:"set the getNewInstance() method to return an instance of your custom condition",id:"set-the-getnewinstance-method-to-return-an-instance-of-your-custom-condition",level:3},{value:"set the getValue() return value to <code>this</code>",id:"set-the-getvalue-return-value-to-this",level:3},{value:"Add a new instance of the condition in <code>EntityConditionsFeature.java</code>",id:"add-a-new-instance-of-the-condition-in-entityconditionsfeaturejava",level:2},{value:"Add a new entry in <code>FeatureSettingsSCoreEN.java</code>",id:"add-a-new-entry-in-featuresettingsscoreenjava",level:2},{value:"Compile",id:"compile",level:2}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"-adding-entity-conditions",children:"\u270d Adding Entity Conditions"})}),"\n",(0,r.jsx)(n.p,{children:"This page will help you in how to create entity conditions for SCore"}),"\n",(0,r.jsx)("hr",{}),"\n",(0,r.jsxs)(n.p,{children:["Target package: ",(0,r.jsx)(n.code,{children:"src.main.java.com.ssomar.score.features.custom"})]}),"\n",(0,r.jsx)("hr",{}),"\n",(0,r.jsxs)(n.h3,{id:"go-to-comssomarscorefeaturesfeaturesettingsscorejava-to-add-an-enum-for-your-condition",children:["Go to ",(0,r.jsx)(n.code,{children:"com.ssomar.score.features.FeatureSettingsSCore.java"})," to add an enum for your condition"]}),"\n",(0,r.jsxs)(n.p,{children:["Go add an enum for your custom condition in FeatureSettingsSCore enum. When\r\nwriting the enum for it, write it in camel case.",(0,r.jsx)(n.br,{}),"\n","Ex:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'ifEntityInRegion(getFeatureSettings("ifEntityInRegion",SavingVerbosityLevel.SAVE_ONLY_WHEN_DIFFERENT_DEFAULT))\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"go-to-the-entity-package",children:["Go to the ",(0,r.jsx)(n.code,{children:"entity"})," package"]}),"\n",(0,r.jsx)(n.p,{children:"This will contain the files responsible for entity conditions"}),"\n",(0,r.jsxs)(n.h2,{id:"go-to-the-entitycondition-package",children:["Go to the ",(0,r.jsx)(n.code,{children:"entity.condition"})," package"]}),"\n",(0,r.jsx)(n.p,{children:"You will create your custom condition's class in this package."}),"\n",(0,r.jsx)(n.h2,{id:"create-the-custom-class",children:"Create the custom class"}),"\n",(0,r.jsx)(n.p,{children:"Creating a custom condition requires several steps to make it work. Upon creating the class, do the following:"}),"\n",(0,r.jsx)(n.h3,{id:"make-the-class-extend-entityconditionfeature",children:"Make the class extend EntityConditionFeature"}),"\n",(0,r.jsx)(n.p,{children:"To study how to create a custom entity condition, we will use the IfSheepColor.java code"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Source code of IfSeepColor.java"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="IfSheepColor.java"',children:"package com.ssomar.score.features.custom.conditions.entity.condition;\r\n\r\nimport com.ssomar.score.features.FeatureParentInterface;\r\nimport com.ssomar.score.features.FeatureSettingsSCore;\r\nimport com.ssomar.score.features.custom.conditions.entity.EntityConditionFeature;\r\nimport com.ssomar.score.features.custom.conditions.entity.EntityConditionRequest;\r\nimport com.ssomar.score.features.types.list.ListUncoloredStringFeature;\r\nimport com.ssomar.score.utils.strings.StringConverter;\r\nimport org.bukkit.entity.Entity;\r\nimport org.bukkit.entity.Sheep;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Optional;\r\n\r\npublic class IfSheepColor extends EntityConditionFeature<ListUncoloredStringFeature, IfSheepColor> {\r\n    public IfSheepColor(FeatureParentInterface parent) {\r\n        super(parent, FeatureSettingsSCore.ifSheepColor);\r\n    }\r\n\r\n    @Override\r\n    public boolean verifCondition(EntityConditionRequest request) {\r\n        if (hasCondition()) {\r\n\r\n\r\n            Entity entity = request.getEntity();\r\n            // return false automatically if entity is not sheep\r\n            if (!(entity instanceof Sheep)) return false;\r\n\r\n            boolean notValid = true;\r\n            for (String name : getCondition().getValue(request.getSp())) {\r\n                if (StringConverter.decoloredString(\r\n                        String.valueOf(\r\n                                ((Sheep) entity).getColor()\r\n                        )\r\n                ).equalsIgnoreCase(name)) {\r\n                    notValid = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (notValid) {\r\n                runInvalidCondition(request);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void subReset() {\r\n        setCondition(new ListUncoloredStringFeature(getParent(), new ArrayList<>(), FeatureSettingsSCore.ifSheepColor, Optional.empty()));\r\n    }\r\n\r\n    @Override\r\n    public boolean hasCondition() {\r\n        return !getCondition().getValue().isEmpty();\r\n    }\r\n\r\n    @Override\r\n    public IfSheepColor getNewInstance(FeatureParentInterface newParent) {\r\n        return new IfSheepColor(newParent);\r\n    }\r\n\r\n    @Override\r\n    public IfSheepColor getValue() {\r\n        return this;\r\n    }\r\n}\n"})}),(0,r.jsx)(n.p,{children:"We will be looking back at this on repeat to learn how to properly implement a custom entity condition. Let's proceed"})]}),"\n",(0,r.jsx)(n.h3,{id:"select-what-feature-parent-interface-to-use",children:"Select what Feature Parent Interface to use"}),"\n",(0,r.jsxs)(n.p,{children:["In this page, we will use ",(0,r.jsx)(n.a,{href:"/SCore-Documentation/docs/score/library_tools/feature_parent_interface/ListUncoloredStringFeature",children:"ListUncoloredStringFeature"})," to request\r\nthe user for uncolored string entries."]}),"\n",(0,r.jsx)(n.h3,{id:"then-finalize-the-extend-classs-properties",children:"Then finalize the extend class's properties"}),"\n",(0,r.jsx)(n.p,{children:"In the parent class of our custom entity condition, it will look like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class IfEntityInRegion extends EntityConditionFeature<ListUncoloredStringFeature, IfEntityInRegion>\n"})}),"\n",(0,r.jsx)(n.p,{children:"The second argument in the EntityConditionFeature generic must be the custom condition's class id."}),"\n",(0,r.jsx)(n.h3,{id:"create-the-constructor",children:"Create the constructor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public IfEntityInRegion(FeatureParentInterface parent, FeatureSettingsInterface featureSetting) {\r\n        super(parent, FeatureSettingsSCore.ifEntityInRegion);\r\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setup-the-conditions-logic",children:"Setup the condition's logic"}),"\n",(0,r.jsxs)(n.p,{children:["The interface method that you will override is named ",(0,r.jsx)(n.code,{children:"verifCondition"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"    @Override\r\n    public boolean verifCondition(EntityConditionRequest request) {\r\n        if (hasCondition()) {\r\n            \r\n        }\r\n\r\n        return true;\r\n    }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The method has to return ",(0,r.jsx)(n.code,{children:"true"})," to consider your condition in an ei item met.",(0,r.jsx)(n.br,{}),"\n","So you'd want to add ",(0,r.jsx)(n.code,{children:"return false"}),' statements across your logic to "fail" your condition.']}),"\n",(0,r.jsx)(n.p,{children:"Write the condition logic inside of the hasCondition() if statement."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.a,{href:"/SCore-Documentation/docs/score/library_tools/dependency_management",children:"Dependency Management"})," if you want to try adding external api\r\nto your conditions."]})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["To make the condition return its invalid message, use the ",(0,r.jsx)(n.code,{children:"runInvalidCondition(request);"})," method call before your ",(0,r.jsx)(n.code,{children:"return false"})," statements."]})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["How to get the instance of the entity involved for this condition?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"Entity entity = request.getEntity();"})]})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsxs)("summary",{children:["Sample logic written in ",(0,r.jsx)(n.code,{children:"verifCondition()"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"    @Override\r\n    public boolean verifCondition(EntityConditionRequest request) {\r\n        if (hasCondition()) {\r\n            \r\n            Entity entity = request.getEntity();\r\n            // return false automatically if entity is not sheep\r\n            if (!(entity instanceof Sheep)) return false;\r\n1\r\n            boolean notValid = true;\r\n            for (String name : getCondition().getValue(request.getSp())) {\r\n                if (StringConverter.decoloredString(\r\n                        String.valueOf(\r\n                                ((Sheep) entity).getColor()\r\n                        )\r\n                ).equalsIgnoreCase(name)) {\r\n                    notValid = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (notValid) {\r\n                runInvalidCondition(request);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"add-this-line-in-subreset",children:"Add this line in subReset()"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"setCondition(new ListUncoloredStringFeature(getParent(), new ArrayList<>(), FeatureSettingsSCore.ifEntityInRegion, Optional.empty()));\n"})}),"\n",(0,r.jsx)(n.p,{children:"Inside of the setCondition(), create a new object of your Feature Parent Interface and inside of it, just go to the interface's\r\ncode to search for its arguments in the constructor method."}),"\n",(0,r.jsx)(n.h3,{id:"set-hascondition-return-value",children:"Set hasCondition() return value"}),"\n",(0,r.jsx)(n.p,{children:"Sample:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"    @Override\r\n    public boolean hasCondition() {\r\n        return !getCondition().getValue().isEmpty();\r\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"set-the-getnewinstance-method-to-return-an-instance-of-your-custom-condition",children:"set the getNewInstance() method to return an instance of your custom condition"}),"\n",(0,r.jsx)(n.p,{children:"Sample:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"    @Override\r\n    public IfSheepColor getNewInstance(FeatureParentInterface newParent) {\r\n        return new IfSheepColor(newParent);\r\n    }\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"set-the-getvalue-return-value-to-this",children:["set the getValue() return value to ",(0,r.jsx)(n.code,{children:"this"})]}),"\n",(0,r.jsx)(n.p,{children:"Sample:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"    @Override\r\n    public IfSheepColor getValue() {\r\n        return this;\r\n    }\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"add-a-new-instance-of-the-condition-in-entityconditionsfeaturejava",children:["Add a new instance of the condition in ",(0,r.jsx)(n.code,{children:"EntityConditionsFeature.java"})]}),"\n",(0,r.jsxs)(n.p,{children:["Path: ",(0,r.jsx)(n.code,{children:"com.ssomar.score.features.custom.conditions.entity.parent.EntityConditionsFeature.java"}),(0,r.jsx)(n.br,{}),"\n","Go to ",(0,r.jsx)(n.code,{children:"reset()"})," method and add the condition's instance like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"conditions.add(new IfEntityInRegion(this));\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"add-a-new-entry-in-featuresettingsscoreenjava",children:["Add a new entry in ",(0,r.jsx)(n.code,{children:"FeatureSettingsSCoreEN.java"})]}),"\n",(0,r.jsxs)(n.p,{children:["Path: ",(0,r.jsx)(n.code,{children:"com.ssomar.score.features.lang.FeatureSettingsSCoreEN.java"}),(0,r.jsx)(n.br,{}),"\n","Add an entry to the ",(0,r.jsx)(n.code,{children:"enum FeatureSettingsSCoreEN"})," like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'ifEntityInRegion("ifEntityInRegion", "If entity is in region", new String[]{}, Material.ANVIL)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"compile",children:"Compile"}),"\n",(0,r.jsxs)(n.p,{children:["Now you can run ",(0,r.jsx)(n.code,{children:"mvn clean package install"})," to test your new condition!"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);