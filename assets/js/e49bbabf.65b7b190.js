"use strict";(self.webpackChunkscore_documentation=self.webpackChunkscore_documentation||[]).push([[542],{902:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>r});const c=JSON.parse('{"id":"executableblocks/about_eb_properties/event_blockPlacementEvent/placement_checks","title":"Placement Checks (onBlockPlaceEvent())","description":"Class File: com.ssomar.executableblocks.events.mechanics.PlaceEBPListener.java","source":"@site/docs/executableblocks/about_eb_properties/event_blockPlacementEvent/placement_checks.md","sourceDirName":"executableblocks/about_eb_properties/event_blockPlacementEvent","slug":"/executableblocks/about_eb_properties/event_blockPlacementEvent/placement_checks","permalink":"/SCore-Documentation/docs/executableblocks/about_eb_properties/event_blockPlacementEvent/placement_checks","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/executableblocks/about_eb_properties/event_blockPlacementEvent/placement_checks.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"ExecutableBlocks","previous":{"title":"BlockPlacementEvent Event","permalink":"/SCore-Documentation/docs/category/blockplacementevent-event"},"next":{"title":"Placement Method Call (continueToPlace())","permalink":"/SCore-Documentation/docs/executableblocks/about_eb_properties/event_blockPlacementEvent/continue_to_place"}}');var a=n(4848),l=n(8453);const i={sidebar_position:1},o="Placement Checks (onBlockPlaceEvent())",s={},r=[{value:"Based on BlockPlaceEvent, get Player and Block instance",id:"based-on-blockplaceevent-get-player-and-block-instance",level:2},{value:"If placed block is air",id:"if-placed-block-is-air",level:2},{value:"If <code>firstPlace</code> List array contains the placed block&#39;s location, return",id:"if-firstplace-list-array-contains-the-placed-blocks-location-return",level:3},{value:"Else, add <code>b</code> Location to the array and remove it after 2 ticks",id:"else-add-b-location-to-the-array-and-remove-it-after-2-ticks",level:3},{value:"Clone the held item into an ItemStack variable (<code>is</code>)",id:"clone-the-held-item-into-an-itemstack-variable-is",level:2},{value:"Create an <code>ExecutableBlockObject</code> instance based on the held item&#39;s itemstack",id:"create-an-executableblockobject-instance-based-on-the-held-items-itemstack",level:2},{value:"If the <code>ExecutableBlockObject</code> is not valid, return",id:"if-the-executableblockobject-is-not-valid-return",level:2},{value:"Create a <code>List&lt;CreationType&gt;</code> arraylist",id:"create-a-listcreationtype-arraylist",level:2},{value:"If the <code>.getCreationType()</code> value is either from ItemsAdder or ExecutableItems",id:"if-the-getcreationtype-value-is-either-from-itemsadder-or-executableitems",level:2},{value:"If the block type of the placed block is air, return",id:"if-the-block-type-of-the-placed-block-is-air-return",level:3},{value:"Set .setCancelled() to false and place the EB after 2 ticks",id:"set-setcancelled-to-false-and-place-the-eb-after-2-ticks",level:3},{value:"Else, place the EB as normal.",id:"else-place-the-eb-as-normal",level:2}];function d(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"placement-checks-onblockplaceevent",children:"Placement Checks (onBlockPlaceEvent())"})}),"\n",(0,a.jsxs)(t.p,{children:["Class File: ",(0,a.jsx)(t.code,{children:"com.ssomar.executableblocks.events.mechanics.PlaceEBPListener.java"})]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsxs)(t.mdxAdmonitionTitle,{children:["Method full description: ",(0,a.jsx)(t.code,{children:"public void onBlockPlaceEvent(BlockPlaceEvent e)"})]}),(0,a.jsxs)(t.p,{children:["Q: What am I supposed to see here? ",(0,a.jsx)("br",{}),"\r\nA: A series of checks upon placing any block"]})]}),"\n",(0,a.jsx)(t.h2,{id:"based-on-blockplaceevent-get-player-and-block-instance",children:"Based on BlockPlaceEvent, get Player and Block instance"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"\r\n        Player p = e.getPlayer();\r\n        Block b = e.getBlockPlaced();\n"})}),"\n",(0,a.jsx)(t.h2,{id:"if-placed-block-is-air",children:"If placed block is air"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.code,{children:"if(b.getType().isAir())"})}),"\n"]}),"\n",(0,a.jsxs)(t.h3,{id:"if-firstplace-list-array-contains-the-placed-blocks-location-return",children:["If ",(0,a.jsx)(t.code,{children:"firstPlace"})," List array contains the placed block's location, return"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"ItemAdder generates multiple BlockPlaceEvent, we need to take only the first one"}),"\n"]}),"\n",(0,a.jsxs)(t.h3,{id:"else-add-b-location-to-the-array-and-remove-it-after-2-ticks",children:["Else, add ",(0,a.jsx)(t.code,{children:"b"})," Location to the array and remove it after 2 ticks"]}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsx)(t.p,{children:"This needs further explanation to why it's like this.\r\nIn the current state of the source code, Ssomar wrote no comments :/"})}),"\n",(0,a.jsxs)(t.h2,{id:"clone-the-held-item-into-an-itemstack-variable-is",children:["Clone the held item into an ItemStack variable (",(0,a.jsx)(t.code,{children:"is"}),")"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The held item is the item that got placed"}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"TODO ItemsAdder doesnt return the offhand item when it simulate the placing of a furniture."})}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"clone otherwise it can cause dupe when the plugin try to init variables  - and here no need to have the real itemstack"})}),"\n",(0,a.jsxs)(t.h2,{id:"create-an-executableblockobject-instance-based-on-the-held-items-itemstack",children:["Create an ",(0,a.jsx)(t.code,{children:"ExecutableBlockObject"})," instance based on the held item's itemstack"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Yes, when you run ",(0,a.jsx)(t.code,{children:"e.getPlayer().getInventory().getItem(e.getHand()).clone()"}),", it returns the itemstack of the block\r\nyou placed that caused the event."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"n"})," in the variable refers to ",(0,a.jsx)(t.code,{children:"new"})]}),"\n"]}),"\n",(0,a.jsxs)(t.h2,{id:"if-the-executableblockobject-is-not-valid-return",children:["If the ",(0,a.jsx)(t.code,{children:"ExecutableBlockObject"})," is not valid, return"]}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsx)(t.p,{children:"This needs further explanation to why it's valid.\r\nIn the current state of the source code, Ssomar wrote no comments :/"})}),"\n",(0,a.jsxs)(t.h2,{id:"create-a-listcreationtype-arraylist",children:["Create a ",(0,a.jsx)(t.code,{children:"List<CreationType>"})," arraylist"]}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"CreationType is an enum that belongs to SCore\r\nmainly contains enums that allow the user to decide how the EB will be made in a way\r\nsuch as importing from ei, ia or nexo"})}),"\n",(0,a.jsxs)(t.h2,{id:"if-the-getcreationtype-value-is-either-from-itemsadder-or-executableitems",children:["If the ",(0,a.jsx)(t.code,{children:".getCreationType()"})," value is either from ItemsAdder or ExecutableItems"]}),"\n",(0,a.jsx)(t.h3,{id:"if-the-block-type-of-the-placed-block-is-air-return",children:"If the block type of the placed block is air, return"}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsx)(t.p,{children:"This needs further explanation to why it's like this.\r\nIn the current state of the source code, Ssomar wrote no comments :/"})}),"\n",(0,a.jsx)(t.h3,{id:"set-setcancelled-to-false-and-place-the-eb-after-2-ticks",children:"Set .setCancelled() to false and place the EB after 2 ticks"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"here the event is cancelled , probably by items adder, we need to turn it back to false"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"else-place-the-eb-as-normal",children:"Else, place the EB as normal."})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var c=n(6540);const a={},l=c.createContext(a);function i(e){const t=c.useContext(l);return c.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),c.createElement(l.Provider,{value:t},e.children)}}}]);