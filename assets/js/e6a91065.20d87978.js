"use strict";(self.webpackChunkscore_documentation=self.webpackChunkscore_documentation||[]).push([[88],{7654:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"conditions/entity_conditions","title":"Entity Conditions","description":"This page will help you in how to create entity conditions for SCore","source":"@site/docs/conditions/entity_conditions.md","sourceDirName":"conditions","slug":"/conditions/entity_conditions","permalink":"/SCore-Documentation/docs/conditions/entity_conditions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/conditions/entity_conditions.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Conditions","permalink":"/SCore-Documentation/docs/category/conditions"}}');var o=t(4848),r=t(8453);const s={sidebar_position:1},a="Entity Conditions",c={},d=[{value:"Go to <code>com.ssomar.score.features.FeatureSettingsSCore.java</code> to add an enum for your condition",id:"go-to-comssomarscorefeaturesfeaturesettingsscorejava-to-add-an-enum-for-your-condition",level:3},{value:"Go to the <code>entity</code> package",id:"go-to-the-entity-package",level:2},{value:"Go to the <code>entity.condition</code> package",id:"go-to-the-entitycondition-package",level:2},{value:"Create the custom class",id:"create-the-custom-class",level:2},{value:"Make the class extend EntityConditionFeature",id:"make-the-class-extend-entityconditionfeature",level:3},{value:"Select what Feature Parent Interface to use",id:"select-what-feature-parent-interface-to-use",level:3},{value:"Then finalize the extend class&#39;s properties",id:"then-finalize-the-extend-classs-properties",level:3},{value:"Create the constructor",id:"create-the-constructor",level:3},{value:"Setup the condition&#39;s logic",id:"setup-the-conditions-logic",level:3},{value:"Add this line in subReset()",id:"add-this-line-in-subreset",level:3},{value:"Set hasCondition() return value",id:"set-hascondition-return-value",level:3},{value:"set the getNewInstance() method to return an instance of your custom condition",id:"set-the-getnewinstance-method-to-return-an-instance-of-your-custom-condition",level:3},{value:"set the getValue() return value to <code>this</code>",id:"set-the-getvalue-return-value-to-this",level:3},{value:"Add a new instance of the condition in <code>EntityConditionsFeature.java</code>",id:"add-a-new-instance-of-the-condition-in-entityconditionsfeaturejava",level:2},{value:"Add a new entry in <code>FeatureSettingsSCoreEN.java</code>",id:"add-a-new-entry-in-featuresettingsscoreenjava",level:2},{value:"Compile",id:"compile",level:2}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"entity-conditions",children:"Entity Conditions"})}),"\n",(0,o.jsx)(n.p,{children:"This page will help you in how to create entity conditions for SCore"}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsxs)(n.p,{children:["Target package: ",(0,o.jsx)(n.code,{children:"src.main.java.com.ssomar.score.features.custom"})]}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsxs)(n.h3,{id:"go-to-comssomarscorefeaturesfeaturesettingsscorejava-to-add-an-enum-for-your-condition",children:["Go to ",(0,o.jsx)(n.code,{children:"com.ssomar.score.features.FeatureSettingsSCore.java"})," to add an enum for your condition"]}),"\n",(0,o.jsxs)(n.p,{children:["Go add an enum for your custom condition in FeatureSettingsSCore enum. When\nwriting the enum for it, write it in camel case.",(0,o.jsx)(n.br,{}),"\n","Ex:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'ifEntityInRegion(getFeatureSettings("ifEntityInRegion",SavingVerbosityLevel.SAVE_ONLY_WHEN_DIFFERENT_DEFAULT))\n'})}),"\n",(0,o.jsxs)(n.h2,{id:"go-to-the-entity-package",children:["Go to the ",(0,o.jsx)(n.code,{children:"entity"})," package"]}),"\n",(0,o.jsx)(n.p,{children:"This will contain the files responsible for entity conditions"}),"\n",(0,o.jsxs)(n.h2,{id:"go-to-the-entitycondition-package",children:["Go to the ",(0,o.jsx)(n.code,{children:"entity.condition"})," package"]}),"\n",(0,o.jsx)(n.p,{children:"You will create your custom condition's class in this package."}),"\n",(0,o.jsx)(n.h2,{id:"create-the-custom-class",children:"Create the custom class"}),"\n",(0,o.jsx)(n.p,{children:"Creating a custom condition requires several steps to make it work. Upon creating the class, do the following:"}),"\n",(0,o.jsx)(n.h3,{id:"make-the-class-extend-entityconditionfeature",children:"Make the class extend EntityConditionFeature"}),"\n",(0,o.jsx)(n.p,{children:"To study how to create a custom entity condition, we will use the IfSheepColor.java code"}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Source code of IfSeepColor.java"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",metastring:'title="IfSheepColor.java"',children:"package com.ssomar.score.features.custom.conditions.entity.condition;\n\nimport com.ssomar.score.features.FeatureParentInterface;\nimport com.ssomar.score.features.FeatureSettingsSCore;\nimport com.ssomar.score.features.custom.conditions.entity.EntityConditionFeature;\nimport com.ssomar.score.features.custom.conditions.entity.EntityConditionRequest;\nimport com.ssomar.score.features.types.list.ListUncoloredStringFeature;\nimport com.ssomar.score.utils.strings.StringConverter;\nimport org.bukkit.entity.Entity;\nimport org.bukkit.entity.Sheep;\n\nimport java.util.ArrayList;\nimport java.util.Optional;\n\npublic class IfSheepColor extends EntityConditionFeature<ListUncoloredStringFeature, IfSheepColor> {\n    public IfSheepColor(FeatureParentInterface parent) {\n        super(parent, FeatureSettingsSCore.ifSheepColor);\n    }\n\n    @Override\n    public boolean verifCondition(EntityConditionRequest request) {\n        if (hasCondition()) {\n\n\n            Entity entity = request.getEntity();\n            // return false automatically if entity is not sheep\n            if (!(entity instanceof Sheep)) return false;\n\n            boolean notValid = true;\n            for (String name : getCondition().getValue(request.getSp())) {\n                if (StringConverter.decoloredString(\n                        String.valueOf(\n                                ((Sheep) entity).getColor()\n                        )\n                ).equalsIgnoreCase(name)) {\n                    notValid = false;\n                    break;\n                }\n            }\n\n            if (notValid) {\n                runInvalidCondition(request);\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    @Override\n    public void subReset() {\n        setCondition(new ListUncoloredStringFeature(getParent(), new ArrayList<>(), FeatureSettingsSCore.ifSheepColor, Optional.empty()));\n    }\n\n    @Override\n    public boolean hasCondition() {\n        return !getCondition().getValue().isEmpty();\n    }\n\n    @Override\n    public IfSheepColor getNewInstance(FeatureParentInterface newParent) {\n        return new IfSheepColor(newParent);\n    }\n\n    @Override\n    public IfSheepColor getValue() {\n        return this;\n    }\n}\n"})}),(0,o.jsx)(n.p,{children:"We will be looking back at this on repeat to learn how to properly implement a custom entity condition. Let's proceed"})]}),"\n",(0,o.jsx)(n.h3,{id:"select-what-feature-parent-interface-to-use",children:"Select what Feature Parent Interface to use"}),"\n",(0,o.jsxs)(n.p,{children:["In this page, we will use ",(0,o.jsx)(n.a,{href:"/SCore-Documentation/docs/feature_parent_interface/ListUncoloredStringFeature",children:"ListUncoloredStringFeature"})," to request\nthe user for uncolored string entries."]}),"\n",(0,o.jsx)(n.h3,{id:"then-finalize-the-extend-classs-properties",children:"Then finalize the extend class's properties"}),"\n",(0,o.jsx)(n.p,{children:"In the parent class of our custom entity condition, it will look like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"public class IfEntityInRegion extends EntityConditionFeature<ListUncoloredStringFeature, IfEntityInRegion>\n"})}),"\n",(0,o.jsx)(n.p,{children:"The second argument in the EntityConditionFeature generic must be the custom condition's class id."}),"\n",(0,o.jsx)(n.h3,{id:"create-the-constructor",children:"Create the constructor"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"public IfEntityInRegion(FeatureParentInterface parent, FeatureSettingsInterface featureSetting) {\n        super(parent, FeatureSettingsSCore.ifEntityInRegion);\n    }\n"})}),"\n",(0,o.jsx)(n.h3,{id:"setup-the-conditions-logic",children:"Setup the condition's logic"}),"\n",(0,o.jsxs)(n.p,{children:["The interface method that you will override is named ",(0,o.jsx)(n.code,{children:"verifCondition"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    @Override\n    public boolean verifCondition(EntityConditionRequest request) {\n        if (hasCondition()) {\n            \n        }\n\n        return true;\n    }\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The method has to return ",(0,o.jsx)(n.code,{children:"true"})," to consider your condition in an ei item met.",(0,o.jsx)(n.br,{}),"\n","So you'd want to add ",(0,o.jsx)(n.code,{children:"return false"}),' statements across your logic to "fail" your condition.']}),"\n",(0,o.jsx)(n.p,{children:"Write the condition logic inside of the hasCondition() if statement."}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Go to ",(0,o.jsx)(n.a,{href:"/SCore-Documentation/docs/dependency_management",children:"Dependency Management"})," if you want to try adding external api\nto your conditions."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["How to get the instance of the entity involved for this condition?",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"Entity entity = request.getEntity();"})]})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsxs)("summary",{children:["Sample logic written in ",(0,o.jsx)(n.code,{children:"verifCondition()"})]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    @Override\n    public boolean verifCondition(EntityConditionRequest request) {\n        if (hasCondition()) {\n            \n            Entity entity = request.getEntity();\n            // return false automatically if entity is not sheep\n            if (!(entity instanceof Sheep)) return false;\n\n            boolean notValid = true;\n            for (String name : getCondition().getValue(request.getSp())) {\n                if (StringConverter.decoloredString(\n                        String.valueOf(\n                                ((Sheep) entity).getColor()\n                        )\n                ).equalsIgnoreCase(name)) {\n                    notValid = false;\n                    break;\n                }\n            }\n\n            if (notValid) {\n                runInvalidCondition(request);\n                return false;\n            }\n        }\n\n        return true;\n    }\n"})})]}),"\n",(0,o.jsx)(n.h3,{id:"add-this-line-in-subreset",children:"Add this line in subReset()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"setCondition(new ListUncoloredStringFeature(getParent(), new ArrayList<>(), FeatureSettingsSCore.ifEntityInRegion, Optional.empty()));\n"})}),"\n",(0,o.jsx)(n.p,{children:"Inside of the setCondition(), create a new object of your Feature Parent Interface and inside of it, just go to the interface's\ncode to search for its arguments in the constructor method."}),"\n",(0,o.jsx)(n.h3,{id:"set-hascondition-return-value",children:"Set hasCondition() return value"}),"\n",(0,o.jsx)(n.p,{children:"Sample:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    @Override\n    public boolean hasCondition() {\n        return !getCondition().getValue().isEmpty();\n    }\n"})}),"\n",(0,o.jsx)(n.h3,{id:"set-the-getnewinstance-method-to-return-an-instance-of-your-custom-condition",children:"set the getNewInstance() method to return an instance of your custom condition"}),"\n",(0,o.jsx)(n.p,{children:"Sample:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    @Override\n    public IfSheepColor getNewInstance(FeatureParentInterface newParent) {\n        return new IfSheepColor(newParent);\n    }\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"set-the-getvalue-return-value-to-this",children:["set the getValue() return value to ",(0,o.jsx)(n.code,{children:"this"})]}),"\n",(0,o.jsx)(n.p,{children:"Sample:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    @Override\n    public IfSheepColor getValue() {\n        return this;\n    }\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"add-a-new-instance-of-the-condition-in-entityconditionsfeaturejava",children:["Add a new instance of the condition in ",(0,o.jsx)(n.code,{children:"EntityConditionsFeature.java"})]}),"\n",(0,o.jsxs)(n.p,{children:["Path: ",(0,o.jsx)(n.code,{children:"com.ssomar.score.features.custom.conditions.entity.parent.EntityConditionsFeature.java"}),(0,o.jsx)(n.br,{}),"\n","Go to ",(0,o.jsx)(n.code,{children:"reset()"})," method and add the condition's instance like:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"conditions.add(new IfEntityInRegion(this));\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"add-a-new-entry-in-featuresettingsscoreenjava",children:["Add a new entry in ",(0,o.jsx)(n.code,{children:"FeatureSettingsSCoreEN.java"})]}),"\n",(0,o.jsxs)(n.p,{children:["Path: ",(0,o.jsx)(n.code,{children:"com.ssomar.score.features.lang.FeatureSettingsSCoreEN.java"}),(0,o.jsx)(n.br,{}),"\n","Add an entry to the ",(0,o.jsx)(n.code,{children:"enum FeatureSettingsSCoreEN"})," like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'ifEntityInRegion("ifEntityInRegion", "If entity is in region", new String[]{}, Material.ANVIL)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"compile",children:"Compile"}),"\n",(0,o.jsxs)(n.p,{children:["Now you can run ",(0,o.jsx)(n.code,{children:"mvn clean package install"})," to test your new condition!"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);